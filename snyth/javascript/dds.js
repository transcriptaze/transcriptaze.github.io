import{am as e,an as n,ao as r}from"./notes-715bae62.js";import{h as s,S as t}from"./sn-fc04f381.js";function a(e,n,{m:r,e:t,s:a,"Œ∏":c,h:l,"Œ¶":u,"ùúì":f,"Œ¥x":h,"Œ¥y":y,balance:i}){if(0===f&&0===i){const e=o(n,r,t,a,c,l,u,0,h,y,.5);return{snl:e,snr:e}}{const p=(1-i)/2,m=(1+i)/2,{"ùúìl":g,"ùúìr":w}=s(f);return{snl:o(n,r,t,a,c,l,u,e*g,h,y,p),snr:o(n,r,t,a,c,l,u,e*w,h,y,m)}}}function o(n,r,s,t,a,o,c,l,u,f,h){return e(n,{m:r,e:s,s:t,"Œ∏":a,h:1,"Œ¶":c,"ùúì":l,"Œ¥x":u,"Œ¥y":f}).map((({x:e,y:n})=>{const r=Math.hypot(e,n);return r>0?h*o*n/r:0}))}function c(e,n,{m:r,e:t,s:a,"Œ∏":o,h:c,"Œ¶":u,"ùúì":f,"Œ¥x":h,"Œ¥y":y,balance:i}){if(0===f&&0===i){const e=l(n,r,t,a,o,c,u,0,h,y,.5);return{snl:e,snr:e}}{const p=(1-i)/2,m=(1+i)/2,{"ùúìl":g,"ùúìr":w}=s(f);return{snl:l(n,r,t,a,o,c,u,e*g,h,y,p),snr:l(n,r,t,a,o,c,u,e*w,h,y,m)}}}function l(e,r,s,t,a,o,c,l,u,f,h){return n(e,{m:r,e:s,s:t,"Œ∏":a,h:o,"Œ¶":c,"ùúì":l,"Œ¥x":u,"Œ¥y":f}).map((({x:e,y:n})=>{const r=Math.hypot(e,n);return r>0?h*o*n/r:0}))}function u(e,n,{m:r,e:t,s:a,"Œ∏":o,h:c,"Œ¶":l,"ùúì":u,"Œ¥x":h,"Œ¥y":y,balance:i}){if(0===u&&0===i){const e=f(n,r,t,a,o,c,l,0,h,y,.5);return{snl:e,snr:e}}{const p=(1-i)/2,m=(1+i)/2,{"ùúìl":g,"ùúìr":w}=s(u);return{snl:f(n,r,t,a,o,c,l,e*g,h,y,p),snr:f(n,r,t,a,o,c,l,e*w,h,y,m)}}}function f(e,n,s,t,a,o,c,l,u,f,h){return r(e,{m:n,e:s,s:t,"Œ∏":a,h:1,"Œ¶":c,"ùúì":l,"Œ¥x":u,"Œ¥y":f}).map((({x:e,y:n})=>{const r=Math.hypot(e,n);return r>0?h*o*n/r:0}))}const h=2*Math.PI;class y extends t{constructor(){super("DDS",18)}onMessage(e){e.data.message,super.onMessage(e)}notefn(){const{_version:e,parameters:n,envelope:r}=this.unpack();return this.envelope=r,(e,r,s)=>s>this.threshold?this.genfn0(e,r,n):s>this.threshold/2?this.genfn1(e,r,n):this.genfn(e,r,n)}genfn0(e,n,r){return{snl:new Float32Array(n),snr:new Float32Array(n)}}genfn1(e,n,r){const s=(n,r,{m:s,e:t,s:o,"Œ∏":l,h:f,"Œ¶":h,"ùúì":y,"Œ¥x":i,"Œ¥y":p,balance:m})=>{const g={m:s,e:t,s:o,"Œ∏":l,h:f,"Œ¶":h,"ùúì":0,"Œ¥x":i,"Œ¥y":p,balance:0};switch(r){case"square":return c(e.frequency,n,g);case"ellipse":default:return a(e.frequency,n,g);case"cowbell":return u(e.frequency,n,g)}},t=new Float32Array(n),o=new Float32Array(n),l=h*e.frequency/this.fs,f=new Array(n);for(let r=0;r<n;r++)f[r]=e.alpha+r*l;for(const e of r){const n=s(f,e.shape,e.parameters);n.snl.forEach(((e,n)=>{t[n]+=e})),n.snr.forEach(((e,n)=>{o[n]+=e}))}return{snl:t,snr:o}}genfn(e,n,r){const s=(n,r,s)=>{switch(r){case"square":return c(e.frequency,n,s);case"ellipse":default:return a(e.frequency,n,s);case"cowbell":return u(e.frequency,n,s)}},t=new Float32Array(n),o=new Float32Array(n),l=h*e.frequency/this.fs,f=new Array(n);for(let r=0;r<n;r++)f[r]=e.alpha+r*l;for(const e of r){const n=s(f,e.shape,e.parameters);n.snl.forEach(((e,n)=>{t[n]+=e})),n.snr.forEach(((e,n)=>{o[n]+=e}))}return{snl:t,snr:o}}}try{console.log("... registering DDS"),registerProcessor("dds",y),console.log("... registered DDS")}catch(e){console.error(`${e}`)}
